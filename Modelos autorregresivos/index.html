

<!DOCTYPE html>
<html class="writer-html5" lang="y" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>ARIMA: autoregresivo integrado de medias móviles &mdash; Material Curso 1 documentation</title>
  

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />

  
  
  
  

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/language_data.js"></script>
        <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Deep Learning para pronóstico" href="../Deep Learning para pronóstico/index.html" />
    <link rel="prev" title="Caracterización de las series de tiempo" href="../Caracterización de las series de tiempo/index.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home" alt="Documentation Home"> Material Curso
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Análisis de datos:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../Introducción a R/index.html">Introducción a R</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ggplot2/index.html">ggplot2</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Regresión lineal/index.html">Regresión lineal</a></li>
</ul>
<p class="caption"><span class="caption-text">Análisis exploratorio de datos:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../Análisis gráfico/index.html">Análisis gráfico</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Análisis multivariado de datos/index.html">Análisis multivariado de datos</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Análisis de componentes principales/index.html">Análisis de componentes principales</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Análisis factorial/index.html">Análisis Factorial</a></li>
</ul>
<p class="caption"><span class="caption-text">Teoría de portafolios:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../Generalidades del Mercado Colombiano/index.html">Generalidades del Mercado Colombiano</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Manejo de R-Studio/index.html">Conceptos Previos: Introducción a R y R-Studio</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Conceptos Básicos de Estadística/index.html">Conceptos Básicos de Estadística</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Teoría de Portafolios/index.html">Teoría de Portafolios</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Selección de Carteras/index.html">Selección de Cartera</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Mercado de Renta Fija/index.html">Mercado de Renta fija</a></li>
</ul>
<p class="caption"><span class="caption-text">Modelación:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../Caracterización de las series de tiempo/index.html">Caracterización de las series de tiempo</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">ARIMA: autoregresivo integrado de medias móviles</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Deep Learning para pronóstico/index.html">Deep Learning para pronóstico</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Material Curso</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>ARIMA: autoregresivo integrado de medias móviles</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/Modelos autorregresivos/index.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="arima-autoregresivo-integrado-de-medias-moviles">
<h1>ARIMA: autoregresivo integrado de medias móviles<a class="headerlink" href="#arima-autoregresivo-integrado-de-medias-moviles" title="Permalink to this headline">¶</a></h1>
<p>Para series de tiempo no estacionarias.</p>
<p>La parte de integrado en ARIMA significa que se usará el número de
diferencias no estacionales que debemos examinar para establecer
estacionariedad. Los datos se transformará para que sean estacionarios.
Esta transformación será con las diferencias <span class="math notranslate nohighlight">\(\Delta x_t\)</span>.</p>
<div class="section" id="arima-p-d-q">
<h2>ARIMA(p,d,q)<a class="headerlink" href="#arima-p-d-q" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p><span class="math notranslate nohighlight">\(p\)</span>: Componente autoregresiva del modelo <span class="math notranslate nohighlight">\((AR)\)</span>.</p></li>
<li><p><span class="math notranslate nohighlight">\(d\)</span>: orden de integración. Es el número de veces que se debe
integrar la serie de tiempo para obtener la estacionariedad.</p></li>
<li><p><span class="math notranslate nohighlight">\(q\)</span>: Componente de medias móviles <span class="math notranslate nohighlight">\((MA)\)</span>.</p></li>
</ul>
<p>Los modelos ARIMA(p,d,q) son un modelo ARMA(p,q) aplicado a una nueva
serie de tiempo generada mediante la integración, es decir, por las
diferencias y que esta nueva serie de tiempo es estacionaria.</p>
<p>Se empezará con el modelo ARIMA(1,1,1), luego se analizan los residuos,
si no son Ruido Blanco, se evalúan modelos más complejos.</p>
<p>Recordar que por cada integración se perderá una observación.</p>
<p><span class="math notranslate nohighlight">\(ARIMA(p,0,q)= ARMA(p,q)\)</span></p>
</div>
<div class="section" id="arima-1-1-1">
<h2>ARIMA(1,1,1)<a class="headerlink" href="#arima-1-1-1" title="Permalink to this headline">¶</a></h2>
<div class="math notranslate nohighlight">
\[\Delta x_t = c+\varphi_1 \Delta x_{t-1}+\theta_1 \epsilon_{t-1}+\epsilon_t\]</div>
<div class="math notranslate nohighlight">
\[\Delta x_t = x_t - x_{t-1}\]</div>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
</pre></div>
</div>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">datos</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;Precio.csv&#39;</span><span class="p">,</span> <span class="n">sep</span><span class="o">=</span><span class="s1">&#39;;&#39;</span><span class="p">,</span> <span class="n">decimal</span><span class="o">=</span><span class="s1">&#39;,&#39;</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">datos</span><span class="o">.</span><span class="n">Fecha</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="n">datos</span><span class="o">.</span><span class="n">Fecha</span><span class="p">,</span> <span class="n">dayfirst</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span>
<span class="n">datos</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="s1">&#39;Fecha&#39;</span><span class="p">,</span> <span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="id1">
<h2>ARIMA(1,1,1)<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h2>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">statsmodels.tsa.arima_model</span> <span class="kn">import</span> <span class="n">ARIMA</span>
</pre></div>
</div>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">warnings</span>
<span class="n">warnings</span><span class="o">.</span><span class="n">filterwarnings</span><span class="p">(</span><span class="s2">&quot;ignore&quot;</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">model_ar_1_i_1_ma_1</span> <span class="o">=</span> <span class="n">ARIMA</span><span class="p">(</span><span class="n">datos</span><span class="o">.</span><span class="n">Precio</span><span class="p">,</span> <span class="n">order</span><span class="o">=</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">))</span>
<span class="n">results_ar_1_i_1_ma_1</span> <span class="o">=</span> <span class="n">model_ar_1_i_1_ma_1</span><span class="o">.</span><span class="n">fit</span><span class="p">()</span>
<span class="n">results_ar_1_i_1_ma_1</span><span class="o">.</span><span class="n">summary</span><span class="p">()</span>
</pre></div>
</div>
<table class="simpletable">
<caption>ARIMA Model Results</caption>
<tr>
  <th>Dep. Variable:</th>     <td>D.Precio</td>     <th>  No. Observations:  </th>    <td>5816</td>
</tr>
<tr>
  <th>Model:</th>          <td>ARIMA(1, 1, 1)</td>  <th>  Log Likelihood     </th> <td>-27010.235</td>
</tr>
<tr>
  <th>Method:</th>             <td>css-mle</td>     <th>  S.D. of innovations</th>   <td>25.158</td>
</tr>
<tr>
  <th>Date:</th>          <td>Thu, 15 Jul 2021</td> <th>  AIC                </th>  <td>54028.469</td>
</tr>
<tr>
  <th>Time:</th>              <td>05:54:51</td>     <th>  BIC                </th>  <td>54055.143</td>
</tr>
<tr>
  <th>Sample:</th>                <td>1</td>        <th>  HQIC               </th>  <td>54037.747</td>
</tr>
<tr>
  <th></th>                       <td> </td>        <th>                     </th>      <td> </td>
</tr>
</table>
<table class="simpletable">
<tr>
         <td></td>           <th>coef</th>     <th>std err</th>      <th>z</th>      <th>P>|z|</th>  <th>[0.025</th>    <th>0.975]</th>
</tr>
<tr>
  <th>const</th>          <td>    0.0408</td> <td>    0.364</td> <td>    0.112</td> <td> 0.911</td> <td>   -0.672</td> <td>    0.753</td>
</tr>
<tr>
  <th>ar.L1.D.Precio</th> <td>   -0.2638</td> <td>    0.059</td> <td>   -4.472</td> <td> 0.000</td> <td>   -0.379</td> <td>   -0.148</td>
</tr>
<tr>
  <th>ma.L1.D.Precio</th> <td>    0.3930</td> <td>    0.056</td> <td>    7.080</td> <td> 0.000</td> <td>    0.284</td> <td>    0.502</td>
</tr>
</table>
<table class="simpletable">
<caption>Roots</caption>
<tr>
    <td></td>   <th>            Real</th>  <th>         Imaginary</th> <th>         Modulus</th>  <th>        Frequency</th>
</tr>
<tr>
  <th>AR.1</th> <td>          -3.7903</td> <td>          +0.0000j</td> <td>           3.7903</td> <td>           0.5000</td>
</tr>
<tr>
  <th>MA.1</th> <td>          -2.5443</td> <td>          +0.0000j</td> <td>           2.5443</td> <td>           0.5000</td>
</tr>
</table></div>
<div class="section" id="residuales-del-arima-1-1-1">
<h2>Residuales del ARIMA(1,1,1)<a class="headerlink" href="#residuales-del-arima-1-1-1" title="Permalink to this headline">¶</a></h2>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">statsmodels.graphics.tsaplots</span> <span class="k">as</span> <span class="nn">sgt</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
</pre></div>
</div>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">residuos_ARIAM111</span> <span class="o">=</span> <span class="n">results_ar_1_i_1_ma_1</span><span class="o">.</span><span class="n">resid</span>
<span class="n">sgt</span><span class="o">.</span><span class="n">plot_acf</span><span class="p">(</span><span class="n">residuos_ARIAM111</span><span class="p">,</span> <span class="n">zero</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">lags</span> <span class="o">=</span> <span class="mi">40</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s2">&quot;ACF Of Residuals for ARIMA(1,1,1)&quot;</span><span class="p">,</span><span class="n">size</span><span class="o">=</span><span class="mi">20</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
<img alt="../_images/output_19_03.png" src="../_images/output_19_03.png" />
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">sgt</span><span class="o">.</span><span class="n">plot_acf</span><span class="p">(</span><span class="n">residuos_ARIAM111</span><span class="p">,</span> <span class="n">zero</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">lags</span> <span class="o">=</span> <span class="mi">40</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s2">&quot;ACF Of Residuals for ARIMA(1,1,1)&quot;</span><span class="p">,</span><span class="n">size</span><span class="o">=</span><span class="mi">20</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
<img alt="../_images/output_20_02.png" src="../_images/output_20_02.png" />
</div>
<div class="section" id="evaluacion-de-varios-modelos-de-arima">
<h2>Evaluación de varios modelos de ARIMA<a class="headerlink" href="#evaluacion-de-varios-modelos-de-arima" title="Permalink to this headline">¶</a></h2>
<p>Primero se deben calcular todos los modelos y escoger los que tienen
todos los coeficientes significativos. Este paso no se ha realizado, se
evaluarán unos modelos que estamos suponiendo que tienen todos los
coeficientes significativos.</p>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">model_ar_1_i_1_ma_2</span> <span class="o">=</span> <span class="n">ARIMA</span><span class="p">(</span><span class="n">datos</span><span class="o">.</span><span class="n">Precio</span><span class="p">,</span> <span class="n">order</span><span class="o">=</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">))</span>
<span class="n">results_ar_1_i_1_ma_2</span> <span class="o">=</span> <span class="n">model_ar_1_i_1_ma_2</span><span class="o">.</span><span class="n">fit</span><span class="p">()</span>
<span class="n">model_ar_1_i_1_ma_3</span> <span class="o">=</span> <span class="n">ARIMA</span><span class="p">(</span><span class="n">datos</span><span class="o">.</span><span class="n">Precio</span><span class="p">,</span> <span class="n">order</span><span class="o">=</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">3</span><span class="p">))</span>
<span class="n">results_ar_1_i_1_ma_3</span> <span class="o">=</span> <span class="n">model_ar_1_i_1_ma_3</span><span class="o">.</span><span class="n">fit</span><span class="p">()</span>
<span class="n">model_ar_2_i_1_ma_1</span> <span class="o">=</span> <span class="n">ARIMA</span><span class="p">(</span><span class="n">datos</span><span class="o">.</span><span class="n">Precio</span><span class="p">,</span> <span class="n">order</span><span class="o">=</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">))</span>
<span class="n">results_ar_2_i_1_ma_1</span> <span class="o">=</span> <span class="n">model_ar_2_i_1_ma_1</span><span class="o">.</span><span class="n">fit</span><span class="p">()</span>
<span class="n">model_ar_3_i_1_ma_1</span> <span class="o">=</span> <span class="n">ARIMA</span><span class="p">(</span><span class="n">datos</span><span class="o">.</span><span class="n">Precio</span><span class="p">,</span> <span class="n">order</span><span class="o">=</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">))</span>
<span class="n">results_ar_3_i_1_ma_1</span> <span class="o">=</span> <span class="n">model_ar_3_i_1_ma_1</span><span class="o">.</span><span class="n">fit</span><span class="p">()</span>
<span class="n">model_ar_3_i_1_ma_2</span> <span class="o">=</span> <span class="n">ARIMA</span><span class="p">(</span><span class="n">datos</span><span class="o">.</span><span class="n">Precio</span><span class="p">,</span> <span class="n">order</span><span class="o">=</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">))</span>
<span class="n">results_ar_3_i_1_ma_2</span> <span class="o">=</span> <span class="n">model_ar_3_i_1_ma_2</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">start_ar_lags</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;ARIMA(1,1,1):  </span><span class="se">\t</span><span class="s2"> LL = &quot;</span><span class="p">,</span> <span class="n">results_ar_1_i_1_ma_1</span><span class="o">.</span><span class="n">llf</span><span class="p">,</span> <span class="s2">&quot;</span><span class="se">\t</span><span class="s2"> AIC = &quot;</span><span class="p">,</span> <span class="n">results_ar_1_i_1_ma_1</span><span class="o">.</span><span class="n">aic</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;ARIMA(1,1,2):  </span><span class="se">\t</span><span class="s2"> LL = &quot;</span><span class="p">,</span> <span class="n">results_ar_1_i_1_ma_2</span><span class="o">.</span><span class="n">llf</span><span class="p">,</span> <span class="s2">&quot;</span><span class="se">\t</span><span class="s2"> AIC = &quot;</span><span class="p">,</span> <span class="n">results_ar_1_i_1_ma_2</span><span class="o">.</span><span class="n">aic</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;ARIMA(1,1,3):  </span><span class="se">\t</span><span class="s2"> LL = &quot;</span><span class="p">,</span> <span class="n">results_ar_1_i_1_ma_3</span><span class="o">.</span><span class="n">llf</span><span class="p">,</span> <span class="s2">&quot;</span><span class="se">\t</span><span class="s2"> AIC = &quot;</span><span class="p">,</span> <span class="n">results_ar_1_i_1_ma_3</span><span class="o">.</span><span class="n">aic</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;ARIMA(2,1,1):  </span><span class="se">\t</span><span class="s2"> LL = &quot;</span><span class="p">,</span> <span class="n">results_ar_2_i_1_ma_1</span><span class="o">.</span><span class="n">llf</span><span class="p">,</span> <span class="s2">&quot;</span><span class="se">\t</span><span class="s2"> AIC = &quot;</span><span class="p">,</span> <span class="n">results_ar_2_i_1_ma_1</span><span class="o">.</span><span class="n">aic</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;ARIMA(3,1,1):  </span><span class="se">\t</span><span class="s2"> LL = &quot;</span><span class="p">,</span> <span class="n">results_ar_3_i_1_ma_1</span><span class="o">.</span><span class="n">llf</span><span class="p">,</span> <span class="s2">&quot;</span><span class="se">\t</span><span class="s2"> AIC = &quot;</span><span class="p">,</span> <span class="n">results_ar_3_i_1_ma_1</span><span class="o">.</span><span class="n">aic</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;ARIMA(3,1,2):  </span><span class="se">\t</span><span class="s2"> LL = &quot;</span><span class="p">,</span> <span class="n">results_ar_3_i_1_ma_2</span><span class="o">.</span><span class="n">llf</span><span class="p">,</span> <span class="s2">&quot;</span><span class="se">\t</span><span class="s2"> AIC = &quot;</span><span class="p">,</span> <span class="n">results_ar_3_i_1_ma_2</span><span class="o">.</span><span class="n">aic</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ARIMA</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">):</span>        <span class="n">LL</span> <span class="o">=</span>  <span class="o">-</span><span class="mf">27010.234621625288</span>       <span class="n">AIC</span> <span class="o">=</span>  <span class="mf">54028.469243250576</span>
<span class="n">ARIMA</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">):</span>        <span class="n">LL</span> <span class="o">=</span>  <span class="o">-</span><span class="mf">26970.45408581454</span>        <span class="n">AIC</span> <span class="o">=</span>  <span class="mf">53950.90817162908</span>
<span class="n">ARIMA</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">3</span><span class="p">):</span>        <span class="n">LL</span> <span class="o">=</span>  <span class="o">-</span><span class="mf">26951.814421818075</span>       <span class="n">AIC</span> <span class="o">=</span>  <span class="mf">53915.62884363615</span>
<span class="n">ARIMA</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">):</span>        <span class="n">LL</span> <span class="o">=</span>  <span class="o">-</span><span class="mf">26960.455943244346</span>       <span class="n">AIC</span> <span class="o">=</span>  <span class="mf">53930.91188648869</span>
<span class="n">ARIMA</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">):</span>        <span class="n">LL</span> <span class="o">=</span>  <span class="o">-</span><span class="mf">26954.471631818797</span>       <span class="n">AIC</span> <span class="o">=</span>  <span class="mf">53920.94326363759</span>
<span class="n">ARIMA</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">):</span>        <span class="n">LL</span> <span class="o">=</span>  <span class="o">-</span><span class="mf">26954.419566101034</span>       <span class="n">AIC</span> <span class="o">=</span>  <span class="mf">53922.83913220207</span>
</pre></div>
</div>
<p>De los modelos evaluados, el mejor es el ARIMA(1,1,3) por tener mayor
Log-Verosimilitud y menor AIC.</p>
</div>
<div class="section" id="llr-test">
<h2>LLR Test<a class="headerlink" href="#llr-test" title="Permalink to this headline">¶</a></h2>
<p>Sin embargo, los modelos ARIMA(1,1,1) y ARIMA(1,1,2) están anidados al
modelo ARIMA(1,1,3), se hará comparación si el modelo ARIMA(1,1,3) es
mejor que los dos anteriores.</p>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">LLR_test</span><span class="p">(</span><span class="n">mod_1</span><span class="p">,</span> <span class="n">mod_2</span><span class="p">,</span> <span class="n">DF</span> <span class="o">=</span> <span class="mi">1</span><span class="p">):</span>
    <span class="n">L1</span> <span class="o">=</span> <span class="n">mod_1</span><span class="o">.</span><span class="n">llf</span>
    <span class="n">L2</span> <span class="o">=</span> <span class="n">mod_2</span><span class="o">.</span><span class="n">llf</span>
    <span class="n">LR</span> <span class="o">=</span> <span class="p">(</span><span class="mi">2</span><span class="o">*</span><span class="p">(</span><span class="n">L2</span><span class="o">-</span><span class="n">L1</span><span class="p">))</span>
    <span class="n">p</span> <span class="o">=</span> <span class="n">chi2</span><span class="o">.</span><span class="n">sf</span><span class="p">(</span><span class="n">LR</span><span class="p">,</span> <span class="n">DF</span><span class="p">)</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">p</span>
</pre></div>
</div>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">scipy.stats.distributions</span> <span class="kn">import</span> <span class="n">chi2</span>
</pre></div>
</div>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">LLR test p-value = &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">LLR_test</span><span class="p">(</span><span class="n">results_ar_1_i_1_ma_2</span><span class="p">,</span> <span class="n">results_ar_1_i_1_ma_3</span><span class="p">)))</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">LLR</span> <span class="n">test</span> <span class="n">p</span><span class="o">-</span><span class="n">value</span> <span class="o">=</span> <span class="mf">0.0</span>
</pre></div>
</div>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">LLR test p-value = &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">LLR_test</span><span class="p">(</span><span class="n">results_ar_1_i_1_ma_1</span><span class="p">,</span> <span class="n">results_ar_1_i_1_ma_3</span><span class="p">,</span> <span class="n">DF</span> <span class="o">=</span> <span class="mi">2</span><span class="p">)))</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">LLR</span> <span class="n">test</span> <span class="n">p</span><span class="o">-</span><span class="n">value</span> <span class="o">=</span> <span class="mf">0.0</span>
</pre></div>
</div>
<p>El modelo ARIMA(1,1,3) si es mejor que los dos modelos que están
anidados con este.</p>
</div>
<div class="section" id="residuales-del-modelo-arima-1-1-3">
<h2>Residuales del modelo ARIMA(1,1,3)<a class="headerlink" href="#residuales-del-modelo-arima-1-1-3" title="Permalink to this headline">¶</a></h2>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">residuales_ARIMA_113</span> <span class="o">=</span> <span class="n">results_ar_1_i_1_ma_3</span><span class="o">.</span><span class="n">resid</span>
<span class="n">sgt</span><span class="o">.</span><span class="n">plot_acf</span><span class="p">(</span><span class="n">residuales_ARIMA_113</span><span class="p">,</span> <span class="n">zero</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">lags</span> <span class="o">=</span> <span class="mi">40</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s2">&quot;ACF Of Residuals for ARIMA(1,1,3)&quot;</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="mi">20</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
<img alt="../_images/output_34_0.png" src="../_images/output_34_0.png" />
<p>Se podría evaluar modelos más complejos hasta el ARIMA(7,1,7).</p>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">model_ar_5_i_1_ma_5</span> <span class="o">=</span> <span class="n">ARIMA</span><span class="p">(</span><span class="n">datos</span><span class="o">.</span><span class="n">Precio</span><span class="p">,</span> <span class="n">order</span><span class="o">=</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">5</span><span class="p">))</span>
<span class="n">results_ar_5_i_1_ma_5</span> <span class="o">=</span> <span class="n">model_ar_5_i_1_ma_5</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">start_ar_lags</span><span class="o">=</span><span class="mi">11</span><span class="p">)</span>
<span class="n">results_ar_5_i_1_ma_5</span><span class="o">.</span><span class="n">summary</span><span class="p">()</span>
</pre></div>
</div>
<table class="simpletable">
<caption>ARIMA Model Results</caption>
<tr>
  <th>Dep. Variable:</th>     <td>D.Precio</td>     <th>  No. Observations:  </th>    <td>5816</td>
</tr>
<tr>
  <th>Model:</th>          <td>ARIMA(5, 1, 5)</td>  <th>  Log Likelihood     </th> <td>-26878.553</td>
</tr>
<tr>
  <th>Method:</th>             <td>css-mle</td>     <th>  S.D. of innovations</th>   <td>24.593</td>
</tr>
<tr>
  <th>Date:</th>          <td>Thu, 15 Jul 2021</td> <th>  AIC                </th>  <td>53781.106</td>
</tr>
<tr>
  <th>Time:</th>              <td>05:55:02</td>     <th>  BIC                </th>  <td>53861.127</td>
</tr>
<tr>
  <th>Sample:</th>                <td>1</td>        <th>  HQIC               </th>  <td>53808.939</td>
</tr>
<tr>
  <th></th>                       <td> </td>        <th>                     </th>      <td> </td>
</tr>
</table>
<table class="simpletable">
<tr>
         <td></td>           <th>coef</th>     <th>std err</th>      <th>z</th>      <th>P>|z|</th>  <th>[0.025</th>    <th>0.975]</th>
</tr>
<tr>
  <th>const</th>          <td>    0.0411</td> <td>    0.332</td> <td>    0.124</td> <td> 0.901</td> <td>   -0.609</td> <td>    0.692</td>
</tr>
<tr>
  <th>ar.L1.D.Precio</th> <td>   -0.3205</td> <td>    0.042</td> <td>   -7.665</td> <td> 0.000</td> <td>   -0.402</td> <td>   -0.239</td>
</tr>
<tr>
  <th>ar.L2.D.Precio</th> <td>   -0.2270</td> <td>    0.033</td> <td>   -6.855</td> <td> 0.000</td> <td>   -0.292</td> <td>   -0.162</td>
</tr>
<tr>
  <th>ar.L3.D.Precio</th> <td>   -0.4506</td> <td>    0.030</td> <td>  -15.195</td> <td> 0.000</td> <td>   -0.509</td> <td>   -0.393</td>
</tr>
<tr>
  <th>ar.L4.D.Precio</th> <td>   -0.3947</td> <td>    0.034</td> <td>  -11.511</td> <td> 0.000</td> <td>   -0.462</td> <td>   -0.327</td>
</tr>
<tr>
  <th>ar.L5.D.Precio</th> <td>   -0.6894</td> <td>    0.032</td> <td>  -21.787</td> <td> 0.000</td> <td>   -0.751</td> <td>   -0.627</td>
</tr>
<tr>
  <th>ma.L1.D.Precio</th> <td>    0.4184</td> <td>    0.040</td> <td>   10.561</td> <td> 0.000</td> <td>    0.341</td> <td>    0.496</td>
</tr>
<tr>
  <th>ma.L2.D.Precio</th> <td>    0.1603</td> <td>    0.029</td> <td>    5.588</td> <td> 0.000</td> <td>    0.104</td> <td>    0.216</td>
</tr>
<tr>
  <th>ma.L3.D.Precio</th> <td>    0.3645</td> <td>    0.027</td> <td>   13.655</td> <td> 0.000</td> <td>    0.312</td> <td>    0.417</td>
</tr>
<tr>
  <th>ma.L4.D.Precio</th> <td>    0.4863</td> <td>    0.030</td> <td>   16.124</td> <td> 0.000</td> <td>    0.427</td> <td>    0.545</td>
</tr>
<tr>
  <th>ma.L5.D.Precio</th> <td>    0.7429</td> <td>    0.029</td> <td>   25.497</td> <td> 0.000</td> <td>    0.686</td> <td>    0.800</td>
</tr>
</table>
<table class="simpletable">
<caption>Roots</caption>
<tr>
    <td></td>   <th>            Real</th>  <th>         Imaginary</th> <th>         Modulus</th>  <th>        Frequency</th>
</tr>
<tr>
  <th>AR.1</th> <td>           0.6833</td> <td>          -0.7607j</td> <td>           1.0225</td> <td>          -0.1335</td>
</tr>
<tr>
  <th>AR.2</th> <td>           0.6833</td> <td>          +0.7607j</td> <td>           1.0225</td> <td>           0.1335</td>
</tr>
<tr>
  <th>AR.3</th> <td>          -1.0478</td> <td>          -0.0000j</td> <td>           1.0478</td> <td>          -0.5000</td>
</tr>
<tr>
  <th>AR.4</th> <td>          -0.4456</td> <td>          -1.0609j</td> <td>           1.1506</td> <td>          -0.3133</td>
</tr>
<tr>
  <th>AR.5</th> <td>          -0.4456</td> <td>          +1.0609j</td> <td>           1.1506</td> <td>           0.3133</td>
</tr>
<tr>
  <th>MA.1</th> <td>           0.6951</td> <td>          -0.7411j</td> <td>           1.0161</td> <td>          -0.1301</td>
</tr>
<tr>
  <th>MA.2</th> <td>           0.6951</td> <td>          +0.7411j</td> <td>           1.0161</td> <td>           0.1301</td>
</tr>
<tr>
  <th>MA.3</th> <td>          -1.0380</td> <td>          -0.0000j</td> <td>           1.0380</td> <td>          -0.5000</td>
</tr>
<tr>
  <th>MA.4</th> <td>          -0.5034</td> <td>          -1.0013j</td> <td>           1.1207</td> <td>          -0.3241</td>
</tr>
<tr>
  <th>MA.5</th> <td>          -0.5034</td> <td>          +1.0013j</td> <td>           1.1207</td> <td>           0.3241</td>
</tr>
</table><div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">LLR test p-value = &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">LLR_test</span><span class="p">(</span><span class="n">results_ar_1_i_1_ma_3</span><span class="p">,</span> <span class="n">results_ar_5_i_1_ma_5</span><span class="p">)))</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">LLR</span> <span class="n">test</span> <span class="n">p</span><span class="o">-</span><span class="n">value</span> <span class="o">=</span> <span class="mf">0.0</span>
</pre></div>
</div>
<p>El ARIMA(5,1,5) es mejor que el ARIMA(1,1,3)</p>
</div>
<div class="section" id="residuales-del-modelo-arima-5-1-5">
<h2>Residuales del modelo ARIMA(5,1,5)<a class="headerlink" href="#residuales-del-modelo-arima-5-1-5" title="Permalink to this headline">¶</a></h2>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">residuales_ARIMA_515</span> <span class="o">=</span> <span class="n">results_ar_5_i_1_ma_5</span><span class="o">.</span><span class="n">resid</span>
<span class="n">sgt</span><span class="o">.</span><span class="n">plot_acf</span><span class="p">(</span><span class="n">residuales_ARIMA_515</span><span class="p">,</span> <span class="n">zero</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">lags</span> <span class="o">=</span> <span class="mi">40</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s2">&quot;ACF Of Residuals for ARIMA(5,1,5)&quot;</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="mi">20</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
<img alt="../_images/output_40_0.png" src="../_images/output_40_0.png" />
</div>
<div class="section" id="integracion-d">
<h2>Integración <span class="math notranslate nohighlight">\(d\)</span><a class="headerlink" href="#integracion-d" title="Permalink to this headline">¶</a></h2>
<p>Se calculará la primer diferencia de los precios y se hará la prueba D-F
para determinar si la nueva serie de tiempo es estacionaria o no.</p>
</div>
<div class="section" id="primera-diferencia">
<h2>Primera diferencia<a class="headerlink" href="#primera-diferencia" title="Permalink to this headline">¶</a></h2>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">datos</span><span class="p">[</span><span class="s1">&#39;delta_prices&#39;</span><span class="p">]</span><span class="o">=</span><span class="n">datos</span><span class="o">.</span><span class="n">Precio</span><span class="o">.</span><span class="n">diff</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">datos</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Precio</th>
      <th>delta_prices</th>
    </tr>
    <tr>
      <th>Fecha</th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>2003-03-01</th>
      <td>72.412500</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>2003-03-02</th>
      <td>72.837083</td>
      <td>0.424583</td>
    </tr>
    <tr>
      <th>2003-03-03</th>
      <td>70.103750</td>
      <td>-2.733333</td>
    </tr>
    <tr>
      <th>2003-03-04</th>
      <td>70.770417</td>
      <td>0.666667</td>
    </tr>
    <tr>
      <th>2003-03-05</th>
      <td>69.153750</td>
      <td>-1.616667</td>
    </tr>
  </tbody>
</table>
</div><div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">statsmodels.tsa.stattools</span> <span class="k">as</span> <span class="nn">sts</span>
</pre></div>
</div>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">sts</span><span class="o">.</span><span class="n">adfuller</span><span class="p">(</span><span class="n">datos</span><span class="o">.</span><span class="n">delta_prices</span><span class="p">[</span><span class="mi">1</span><span class="p">:])</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="o">-</span><span class="mf">14.940985509998315</span><span class="p">,</span>
 <span class="mf">1.3227142701322909e-27</span><span class="p">,</span>
 <span class="mi">34</span><span class="p">,</span>
 <span class="mi">5781</span><span class="p">,</span>
 <span class="p">{</span><span class="s1">&#39;1%&#39;</span><span class="p">:</span> <span class="o">-</span><span class="mf">3.431481673763484</span><span class="p">,</span>
  <span class="s1">&#39;5%&#39;</span><span class="p">:</span> <span class="o">-</span><span class="mf">2.8620400923019074</span><span class="p">,</span>
  <span class="s1">&#39;10%&#39;</span><span class="p">:</span> <span class="o">-</span><span class="mf">2.5670361971807805</span><span class="p">},</span>
 <span class="mf">53352.0028917936</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">sgt</span><span class="o">.</span><span class="n">plot_acf</span><span class="p">(</span><span class="n">datos</span><span class="o">.</span><span class="n">delta_prices</span><span class="p">[</span><span class="mi">1</span><span class="p">:],</span> <span class="n">zero</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">lags</span> <span class="o">=</span> <span class="mi">40</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s2">&quot;ACF Of Delta Prices&quot;</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="mi">20</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
<img alt="../_images/output_48_02.png" src="../_images/output_48_02.png" />
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">sgt</span><span class="o">.</span><span class="n">plot_pacf</span><span class="p">(</span><span class="n">datos</span><span class="o">.</span><span class="n">delta_prices</span><span class="p">[</span><span class="mi">1</span><span class="p">:],</span> <span class="n">lags</span> <span class="o">=</span> <span class="mi">40</span><span class="p">,</span> <span class="n">alpha</span> <span class="o">=</span> <span class="mf">0.05</span><span class="p">,</span> <span class="n">zero</span> <span class="o">=</span> <span class="kc">False</span> <span class="p">,</span> <span class="n">method</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;ols&#39;</span><span class="p">))</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s2">&quot;Partial Autocorrelation Function for Delta Prices&quot;</span><span class="p">,</span><span class="n">size</span><span class="o">=</span><span class="mi">20</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
<img alt="../_images/output_49_0.png" src="../_images/output_49_0.png" />
<p>A continuación se mostrará una prueba de que una ARMA(1,1) sobre la
primera diferencia de la serie de tiempo es igual a una ARIMA(1,1) sobre
la serie de tiempo.</p>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">model_delta_ar_1_i_1_ma_1</span> <span class="o">=</span> <span class="n">ARIMA</span><span class="p">(</span><span class="n">datos</span><span class="o">.</span><span class="n">delta_prices</span><span class="p">[</span><span class="mi">1</span><span class="p">:],</span> <span class="n">order</span><span class="o">=</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">))</span>
<span class="n">results_delta_ar_1_i_1_ma_1</span> <span class="o">=</span> <span class="n">model_delta_ar_1_i_1_ma_1</span><span class="o">.</span><span class="n">fit</span><span class="p">()</span>
<span class="n">results_delta_ar_1_i_1_ma_1</span><span class="o">.</span><span class="n">summary</span><span class="p">()</span>
</pre></div>
</div>
<table class="simpletable">
<caption>ARMA Model Results</caption>
<tr>
  <th>Dep. Variable:</th>   <td>delta_prices</td>   <th>  No. Observations:  </th>    <td>5816</td>
</tr>
<tr>
  <th>Model:</th>            <td>ARMA(1, 1)</td>    <th>  Log Likelihood     </th> <td>-27010.235</td>
</tr>
<tr>
  <th>Method:</th>             <td>css-mle</td>     <th>  S.D. of innovations</th>   <td>25.158</td>
</tr>
<tr>
  <th>Date:</th>          <td>Thu, 15 Jul 2021</td> <th>  AIC                </th>  <td>54028.469</td>
</tr>
<tr>
  <th>Time:</th>              <td>05:55:05</td>     <th>  BIC                </th>  <td>54055.143</td>
</tr>
<tr>
  <th>Sample:</th>                <td>0</td>        <th>  HQIC               </th>  <td>54037.747</td>
</tr>
<tr>
  <th></th>                       <td> </td>        <th>                     </th>      <td> </td>
</tr>
</table>
<table class="simpletable">
<tr>
           <td></td>             <th>coef</th>     <th>std err</th>      <th>z</th>      <th>P>|z|</th>  <th>[0.025</th>    <th>0.975]</th>
</tr>
<tr>
  <th>const</th>              <td>    0.0408</td> <td>    0.364</td> <td>    0.112</td> <td> 0.911</td> <td>   -0.672</td> <td>    0.753</td>
</tr>
<tr>
  <th>ar.L1.delta_prices</th> <td>   -0.2638</td> <td>    0.059</td> <td>   -4.472</td> <td> 0.000</td> <td>   -0.379</td> <td>   -0.148</td>
</tr>
<tr>
  <th>ma.L1.delta_prices</th> <td>    0.3930</td> <td>    0.056</td> <td>    7.080</td> <td> 0.000</td> <td>    0.284</td> <td>    0.502</td>
</tr>
</table>
<table class="simpletable">
<caption>Roots</caption>
<tr>
    <td></td>   <th>            Real</th>  <th>         Imaginary</th> <th>         Modulus</th>  <th>        Frequency</th>
</tr>
<tr>
  <th>AR.1</th> <td>          -3.7903</td> <td>          +0.0000j</td> <td>           3.7903</td> <td>           0.5000</td>
</tr>
<tr>
  <th>MA.1</th> <td>          -2.5443</td> <td>          +0.0000j</td> <td>           2.5443</td> <td>           0.5000</td>
</tr>
</table><div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">model_ar_1_i_1_ma_1</span> <span class="o">=</span> <span class="n">ARIMA</span><span class="p">(</span><span class="n">datos</span><span class="o">.</span><span class="n">Precio</span><span class="p">,</span> <span class="n">order</span><span class="o">=</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">))</span>
<span class="n">results_ar_1_i_1_ma_1</span> <span class="o">=</span> <span class="n">model_ar_1_i_1_ma_1</span><span class="o">.</span><span class="n">fit</span><span class="p">()</span>
<span class="n">results_ar_1_i_1_ma_1</span><span class="o">.</span><span class="n">summary</span><span class="p">()</span>
</pre></div>
</div>
<table class="simpletable">
<caption>ARIMA Model Results</caption>
<tr>
  <th>Dep. Variable:</th>     <td>D.Precio</td>     <th>  No. Observations:  </th>    <td>5816</td>
</tr>
<tr>
  <th>Model:</th>          <td>ARIMA(1, 1, 1)</td>  <th>  Log Likelihood     </th> <td>-27010.235</td>
</tr>
<tr>
  <th>Method:</th>             <td>css-mle</td>     <th>  S.D. of innovations</th>   <td>25.158</td>
</tr>
<tr>
  <th>Date:</th>          <td>Thu, 15 Jul 2021</td> <th>  AIC                </th>  <td>54028.469</td>
</tr>
<tr>
  <th>Time:</th>              <td>05:55:06</td>     <th>  BIC                </th>  <td>54055.143</td>
</tr>
<tr>
  <th>Sample:</th>                <td>1</td>        <th>  HQIC               </th>  <td>54037.747</td>
</tr>
<tr>
  <th></th>                       <td> </td>        <th>                     </th>      <td> </td>
</tr>
</table>
<table class="simpletable">
<tr>
         <td></td>           <th>coef</th>     <th>std err</th>      <th>z</th>      <th>P>|z|</th>  <th>[0.025</th>    <th>0.975]</th>
</tr>
<tr>
  <th>const</th>          <td>    0.0408</td> <td>    0.364</td> <td>    0.112</td> <td> 0.911</td> <td>   -0.672</td> <td>    0.753</td>
</tr>
<tr>
  <th>ar.L1.D.Precio</th> <td>   -0.2638</td> <td>    0.059</td> <td>   -4.472</td> <td> 0.000</td> <td>   -0.379</td> <td>   -0.148</td>
</tr>
<tr>
  <th>ma.L1.D.Precio</th> <td>    0.3930</td> <td>    0.056</td> <td>    7.080</td> <td> 0.000</td> <td>    0.284</td> <td>    0.502</td>
</tr>
</table>
<table class="simpletable">
<caption>Roots</caption>
<tr>
    <td></td>   <th>            Real</th>  <th>         Imaginary</th> <th>         Modulus</th>  <th>        Frequency</th>
</tr>
<tr>
  <th>AR.1</th> <td>          -3.7903</td> <td>          +0.0000j</td> <td>           3.7903</td> <td>           0.5000</td>
</tr>
<tr>
  <th>MA.1</th> <td>          -2.5443</td> <td>          +0.0000j</td> <td>           2.5443</td> <td>           0.5000</td>
</tr>
</table></div>
<div class="section" id="sarima-p-d-q-p-d-q-s">
<h2>SARIMA(p,d,q)(P,D,Q,s)<a class="headerlink" href="#sarima-p-d-q-p-d-q-s" title="Permalink to this headline">¶</a></h2>
<p><strong>SARIMA-Seasonal Autoregressive Integrated Moving Averages</strong></p>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">statsmodels.tsa.statespace.sarimax</span> <span class="kn">import</span> <span class="n">SARIMAX</span>
</pre></div>
</div>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">model_sarima</span> <span class="o">=</span> <span class="n">SARIMAX</span><span class="p">(</span><span class="n">datos</span><span class="o">.</span><span class="n">Precio</span><span class="p">,</span> <span class="n">order</span><span class="o">=</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">),</span> <span class="n">seasonal_order</span> <span class="o">=</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">))</span>
<span class="n">results_sarima</span> <span class="o">=</span> <span class="n">model_sarima</span><span class="o">.</span><span class="n">fit</span><span class="p">()</span>
<span class="n">results_sarima</span><span class="o">.</span><span class="n">summary</span><span class="p">()</span>
</pre></div>
</div>
<table class="simpletable">
<caption>SARIMAX Results</caption>
<tr>
  <th>Dep. Variable:</th>              <td>Precio</td>             <th>  No. Observations:  </th>    <td>5817</td>
</tr>
<tr>
  <th>Model:</th>           <td>SARIMAX(1, 0, 1)x(2, 0, 1, 2)</td> <th>  Log Likelihood     </th> <td>-26974.805</td>
</tr>
<tr>
  <th>Date:</th>                  <td>Thu, 15 Jul 2021</td>        <th>  AIC                </th>  <td>53961.610</td>
</tr>
<tr>
  <th>Time:</th>                      <td>05:55:09</td>            <th>  BIC                </th>  <td>54001.621</td>
</tr>
<tr>
  <th>Sample:</th>                        <td>0</td>               <th>  HQIC               </th>  <td>53975.526</td>
</tr>
<tr>
  <th></th>                            <td> - 5817</td>            <th>                     </th>      <td> </td>
</tr>
<tr>
  <th>Covariance Type:</th>              <td>opg</td>              <th>                     </th>      <td> </td>
</tr>
</table>
<table class="simpletable">
<tr>
     <td></td>        <th>coef</th>     <th>std err</th>      <th>z</th>      <th>P>|z|</th>  <th>[0.025</th>    <th>0.975]</th>
</tr>
<tr>
  <th>ar.L1</th>   <td>    0.9949</td> <td>    0.001</td> <td> 1319.143</td> <td> 0.000</td> <td>    0.993</td> <td>    0.996</td>
</tr>
<tr>
  <th>ma.L1</th>   <td>    0.1061</td> <td>    0.003</td> <td>   40.096</td> <td> 0.000</td> <td>    0.101</td> <td>    0.111</td>
</tr>
<tr>
  <th>ar.S.L2</th> <td>    0.8309</td> <td>    0.020</td> <td>   42.567</td> <td> 0.000</td> <td>    0.793</td> <td>    0.869</td>
</tr>
<tr>
  <th>ar.S.L4</th> <td>    0.0987</td> <td>    0.004</td> <td>   22.085</td> <td> 0.000</td> <td>    0.090</td> <td>    0.108</td>
</tr>
<tr>
  <th>ma.S.L2</th> <td>   -0.9498</td> <td>    0.019</td> <td>  -48.766</td> <td> 0.000</td> <td>   -0.988</td> <td>   -0.912</td>
</tr>
<tr>
  <th>sigma2</th>  <td>  623.3489</td> <td>    1.583</td> <td>  393.688</td> <td> 0.000</td> <td>  620.246</td> <td>  626.452</td>
</tr>
</table>
<table class="simpletable">
<tr>
  <th>Ljung-Box (Q):</th>          <td>442.39</td> <th>  Jarque-Bera (JB):  </th> <td>19183877.49</td>
</tr>
<tr>
  <th>Prob(Q):</th>                 <td>0.00</td>  <th>  Prob(JB):          </th>    <td>0.00</td>
</tr>
<tr>
  <th>Heteroskedasticity (H):</th>  <td>34.65</td> <th>  Skew:              </th>    <td>-6.00</td>
</tr>
<tr>
  <th>Prob(H) (two-sided):</th>     <td>0.00</td>  <th>  Kurtosis:          </th>   <td>284.08</td>
</tr>
</table><br/><br/>Warnings:<br/>[1] Covariance matrix calculated using the outer product of gradients (complex-step).<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">residuales_SARIMA</span> <span class="o">=</span> <span class="n">results_sarima</span><span class="o">.</span><span class="n">resid</span>
<span class="n">sgt</span><span class="o">.</span><span class="n">plot_acf</span><span class="p">(</span><span class="n">residuales_SARIMA</span><span class="p">,</span> <span class="n">zero</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">lags</span> <span class="o">=</span> <span class="mi">40</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s2">&quot;ACF Of Residuals for SARIMA&quot;</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="mi">20</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
<img alt="../_images/output_57_0.png" src="../_images/output_57_0.png" />
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../Deep Learning para pronóstico/index.html" class="btn btn-neutral float-right" title="Deep Learning para pronóstico" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="../Caracterización de las series de tiempo/index.html" class="btn btn-neutral float-left" title="Caracterización de las series de tiempo" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        
        &copy; Copyright 2020, Natalia Acevedo Prins

    </p>
  </div>
    
    
    
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>